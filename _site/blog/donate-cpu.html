<!DOCTYPE html> <html lang="en-US"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="breuer.dev" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="breuer.dev" /> <title> Donate CPU / GPU for Cancer, COVID-19 and co. - breuer.dev </title> <link rel="alternate" href="http://localhost:4000/blog/donate-cpu" hreflang="en-US" /> <link rel="canonical" href="http://localhost:4000/blog/donate-cpu" /> <meta name="description" content="learning by doing" /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="Donate CPU / GPU for Cancer, COVID-19 and co. | Felix Breuer" /> <meta property="og:title" content="Donate CPU / GPU for Cancer, COVID-19 and co. | Felix Breuer" /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://localhost:4000/blog/donate-cpu" /> <meta property="og:description" content="learning by doing" /> <meta property="og:image" content="http://localhost:4000/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="Donate CPU / GPU for Cancer, COVID-19 and co. | felix_breuer" /> <meta name="twitter:url" content="http://localhost:4000/blog/donate-cpu" /> <meta name="twitter:site" content="@felix_breuer" /> <meta name="twitter:creator" content="@felix_breuer" /> <meta name="twitter:description" content="learning by doing" /> <meta name="twitter:image" content="http://localhost:4000/assets/img/ogp.png" /> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="breuer.dev" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="Jekyll Klise" /> <meta name="application-name" content="Jekyll Klise" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/assets/css/style.css" /> </head> <body data-theme="dark" class="notransition"> <script> const body = document.body; const data = body.getAttribute("data-theme"); const initTheme = (state) => { if (state === "dark") { body.setAttribute("data-theme", "dark"); } else if (state === "light") { body.removeAttribute("data-theme"); } else { localStorage.setItem("theme", data); } }; initTheme(localStorage.getItem("theme")); setTimeout(() => body.classList.remove("notransition"), 75); </script> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mode"> <svg class="mode-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mode-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"><a class="menu-link" href="/">home</a><a class="menu-link" href="/archive/">archive</a><a class="menu-link" href="/about/">about</a><a class="menu-link rss" href="/feed.xml"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 512 512" fill="#ED812E" > <title>RSS</title> <path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z" /> <path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z" /> <path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z" /> </svg> </a> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <div class="tags"> <span itemprop="keywords"> <a class="tag" href="/tags/#foldingathome">FOLDINGATHOME</a>, <a class="tag" href="/tags/#corona">CORONA</a>, <a class="tag" href="/tags/#cancer">CANCER</a>, <a class="tag" href="/tags/#covid19">COVID19</a>, <a class="tag" href="/tags/#rosetta">ROSETTA</a>, <a class="tag" href="/tags/#boinc">BOINC</a>, <a class="tag" href="/tags/#donate">DONATE</a>, <a class="tag" href="/tags/#cpu">CPU</a> </span> </div> <h1 class="header-title" itemprop="headline">Donate CPU / GPU for Cancer, COVID-19 and co.</h1> <div class="post-meta"> <time datetime="2020-03-17T11:00:00+01:00" itemprop="datePublished"> Mar 17, 2020 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Felix Breuer</span> </span> <time hidden datetime="" itemprop="dateModified"> Mar 17, 2020 </time> <span hidden itemprop="publisher" itemtype="Person">Felix Breuer</span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><p><strong>TL;DR:</strong> Run <code class="language-plaintext highlighter-rouge">docker run -d johnktims/folding-at-home</code> to donate your spare CPU power!</p> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <p><strong>TL;DR:</strong> Run <code class="language-plaintext highlighter-rouge">docker run -d johnktims/folding-at-home</code> to donate your spare CPU power!</p> <p>As a software developer, you probably rent some sweet little servers to host all your wonderful awesome services.<br /> You probably also realized that there are not that many people using your services so the server is always running at <code class="language-plaintext highlighter-rouge">0.01</code> load.<br /> So what should you do with all that idle compute power?? <!--more--></p> <p>I stumbled across <a href="https://foldingathome.org/">folding@home</a> but all the setup guides don’t fit my needs since in a dockerized world I do not want to install anything (except docker).<br /> I also found <a href="https://boinc.berkeley.edu/">Boinc</a> which got native docker support but it is a little weird to get started at first.</p> <p><strong>Important:</strong> These programs run as ‘low priority’ threads. If your other programs need more CPU power, they will get it!</p> <p><strong><a href="https://www.ibm.com/cloud/learn/docker">Docker? What the heck?</a></strong></p> <h2 id="foldinghome"> <a href="#foldinghome" class="anchor-head"></a> folding@home </h2> <h3 id="docker"> <a href="#docker" class="anchor-head"></a> Docker </h3> <p>A simple one-liner. Works out of the box!</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--restart</span> always <span class="nt">--name</span> folding <span class="nt">-d</span> <span class="nt">-p</span> 7396:7396 johnktims/folding-at-home:latest <span class="se">\</span>
    <span class="nt">--user</span><span class="o">=</span>Anonymous <span class="nt">--team</span><span class="o">=</span>0 <span class="nt">--gpu</span><span class="o">=</span><span class="nb">false</span> <span class="nt">--smp</span><span class="o">=</span><span class="nb">true</span> <span class="nt">--power</span><span class="o">=</span>full

<span class="c"># short version with above as default values</span>
docker run <span class="nt">-p</span> 7396:7396 <span class="nt">-d</span> johnktims/folding-at-home

<span class="c"># stop and remove</span>
docker stop folding <span class="o">&amp;&amp;</span> docker <span class="nb">rm </span>folding
</code></pre></div></div> <p>If you have an account you can also add the <code class="language-plaintext highlighter-rouge">--passkey=&lt;insert_key&gt;</code> parameter and change the user.<br /> There is a neat web ui at <code class="language-plaintext highlighter-rouge">http://localhost:7396</code> to see what you are currently doing.<br /> Available <code class="language-plaintext highlighter-rouge">--power</code> settings are <code class="language-plaintext highlighter-rouge">light</code>, <code class="language-plaintext highlighter-rouge">medium</code> and <code class="language-plaintext highlighter-rouge">full</code>.<br /> <code class="language-plaintext highlighter-rouge">--user=Anonymous</code> and <code class="language-plaintext highlighter-rouge">--team=0</code> basically means: help anybody who needs help and do not add credits to an account.</p> <p>If you got a dedicated graphics card it is also possible to donate this power! It is way more effective than the CPU.<br /> You need Docker 19.03+ and <code class="language-plaintext highlighter-rouge">nvidia-docker-toolkit</code> installed on your host system. Just add the parameter <code class="language-plaintext highlighter-rouge">--gpu all</code> to your container. Simple as that!</p> <h3 id="windows--mac"> <a href="#windows--mac" class="anchor-head"></a> Windows / Mac </h3> <p>I highly recommend to only run this program on a desktop computer or when connected to a power source because it will drain your battery since it is using all the available CPU power on your system.<br /> You can, of course, also use docker here, but why not have a nice gui?</p> <p>Since this is well documented already, I won’t go into detail here.</p> <p><a href="https://foldingathome.org/support/faq/installation-guides/windows/">Official Windows Guide</a><br /> <a href="https://foldingathome.org/support/faq/installation-guides/mac/">Official Mac Guide</a></p> <h3 id="account"> <a href="#account" class="anchor-head"></a> Account </h3> <p>If you want to track all the work you did you can set up an account <a href="https://apps.foldingathome.org/getpasskey">here</a>.<br /> You will get a passkey and username via email.</p> <h3 id="errors"> <a href="#errors" class="anchor-head"></a> Errors </h3> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>14:43:03:ERROR:WU00:FS00:Exception: Could not get an assignment
</code></pre></div></div> <p>If you see this ‘error’ log, don’t worry, there is just nothing to do right now. It will try again later and maybe pick up some work!<br /> That means there are a lot of people donating right now. Keep it up!</p> <h2 id="boinc"> <a href="#boinc" class="anchor-head"></a> Boinc </h2> <p>First, you have to pick a project. One client can only participate in one project at a given time.<br /> <a href="https://boinc.berkeley.edu/projects.php">Click here</a> for a list of all projects.</p> <p>I pick <a href="http://boinc.bakerlab.org/rosetta/">Rosetta@home</a> for this guide because they are currently working on COVID-19.</p> <p>First, you have to create an account at the <a href="https://boinc.bakerlab.org/rosetta/create_account_form.php">Rosetta Project Page</a>.<br /> Once you are logged in go to the section <code class="language-plaintext highlighter-rouge">Account Information</code> and click on <code class="language-plaintext highlighter-rouge">show</code> to see the <code class="language-plaintext highlighter-rouge">Account key</code>.<br /> At the bottom, you will see a <code class="language-plaintext highlighter-rouge">weak account key</code>. Grab this one, we need it!</p> <h3 id="docker-1"> <a href="#docker-1" class="anchor-head"></a> Docker </h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># run</span>
docker run <span class="nt">--restart</span> always <span class="nt">-d</span> <span class="nt">--name</span> boinc <span class="nt">--net</span><span class="o">=</span>host <span class="nt">--pid</span><span class="o">=</span>host <span class="se">\</span>
    <span class="nt">-e</span> <span class="nv">BOINC_CMD_LINE_OPTIONS</span><span class="o">=</span><span class="s2">"--attach_project http://boinc.bakerlab.org/rosetta/ &lt;weak_account_key&gt;"</span> boinc/client

<span class="c"># stop and remove</span>
docker stop boinc <span class="o">&amp;&amp;</span> docker <span class="nb">rm </span>boinc
</code></pre></div></div> <p>If you want to support another project, just swap the project url with the new account key and you are good to go.<br /> If you need more configuration just have a look <a href="https://hub.docker.com/r/boinc/client">here</a> to connect a remote GUI RPC.</p> <h3 id="desktop"> <a href="#desktop" class="anchor-head"></a> Desktop </h3> <p><a href="http://boinc.bakerlab.org/rosetta/join.php">Click here</a> to set up the desktop version or even an Android app.</p> <h3 id="errors-1"> <a href="#errors-1" class="anchor-head"></a> Errors </h3> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>No protocol specified
</code></pre></div></div> <p>If this will be spammed in the docker logs… don’t worry about it! It is just a warning.<br /> I still have to figure out how to suppress this.</p> </div> </article> <!-- unnecessary file, however you can still use for comment section, e.g disqus --> <script src="https://utteranc.es/client.js" repo="breuerfelix/breuerfelix.github.io" issue-term="pathname" label="comment" theme="github-dark" crossorigin="anonymous" async ></script> </main> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/blog/top-neovim-plugins.html" > <div class="nav-arrow">Previous</div> <span class="post-title">Top NeoVim Plugins of 2020</span> </a> <a class="post-nav-item post-nav-next" href="/blog/linux-monitor-hotplug.html"> <div class="nav-arrow">Next</div> <span class="post-title">Hotplug external Monitors on Linux</span> </a> </nav> <footer class="footer"> <a class="footer_item" href="/feed.xml">rss</a> <span class="footer_item">&copy; 2021</span> </footer> <script src="/assets/js/main.js" defer="defer"></script> </div> </body> </html>
